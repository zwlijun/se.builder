<script>
//design: 设计稿尺寸
//fontSize: 基础字体大小
//minFontSize: 最小字体大小
//maxFontSize: 最大字体大小
(function(design, fontSize, minFontSize, maxFontSize){
    var remTimer = null;
    var _reset = function(){
        var root = document.documentElement;
        var body = document.body;

        if(!root || !body){
            return false;
        }

        try{
            var _designWidth = root.getAttribute("data-adaptor-design") || design;
            var _fontSize = root.getAttribute("data-adaptor-base") || fontSize;
            var _minFontSize = Number(root.getAttribute("data-adaptor-min") || minFontSize);
            var _maxFontSize = Number(root.getAttribute("data-adaptor-max") || maxFontSize);
            var clientWidth = Math.max(root.clientWidth, body.clientWidth);
            var width = window.innerWidth || clientWidth;

            var fsize = (_fontSize * (width / _designWidth));

            if(fsize < _minFontSize){
                fsize = _minFontSize;
            }

            if(fsize > _maxFontSize){
                fsize = _maxFontSize;
            }

            root.style.fontSize = fsize + 'px';
        }catch(e){
            return false;
        }

        return true;
    };
    var _listener = function(e){
        setTimeout(_reset, 300);
    };

    var ua = navigator.userAgent;
    var ios = /(iPhone|iPad|iPod)/i.test(ua);
    var x5_tbs = /(TBS)\/(\d+)/.exec(ua);
    var uc = /UC[\s]?Browser/.test(ua);

    if((x5_tbs && ((x5_tbs[2] || "").indexOf("03") == -1)) || uc){
        var r = document.documentElement;
        var cls = r.className;

        if(cls.indexOf("wechat-x5") == -1){
            r.className = cls + " wechat-x5";
        }
    }

    remTimer = setTimeout(function(){
        if(remTimer){
            clearTimeout(remTimer);
            remTimer = null;
        }

        if(_reset()){
            if(("onorientationchange" in window)){
                window.addEventListener("orientationchange", _listener, false);
            }else{
                if("addEventListener" in window){
                    window.addEventListener("resize", _listener, false);
                }else if("attachEvent" in window){
                    window.attachEvent("onresize", _listener);
                }else{
                    window.onresize = _listener;
                }
            }
        }else{
            setTimeout(arguments.callee, 0);
        }
    }, 0);
})(640, 100, 50, 100);
</script>